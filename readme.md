## Setup
You have to install the packages, run pip install -r requirements.txt



## src
The scripts should be run in the order described below, because the scripts are dependent of each other.

### fetcher.py
Input: 
1. Avalanche forecast API
2. External avalanche database

Output: dataset.csv

The fetcher gathers data and merges them into a dataframe. 

NB: The external avalanche database may be unavailable, but it is still possible to run the dependent scripts below.  


### reduce_and_normalize.py
Input: dataset.csv
Output: processed_data.csv

The script reduces and cleans the features and normalizes the data, such that the values are between 0 and 1. 


### balance_dataset.py
Input: processed_data.csv
Output: balanced_dataset.csv

The processed data are not balanced, meaning that there are more 0 values for "avalanche" than 1 values. 
The script shuffles and chooses (at random) the same number 0 values as 1 values for "avalanche". 

### create_model.py
Input: balanced_dataset.csv
Output: AI-model saved in resources/keras_model

The script creates the AI-model and trains it on the balanced dataset. 


### test_model.py
Input: 
1. AI-model from resources/keras_model
2. Test data from ********

Output: Plots of accuracy of the model

The script evaluates the model with test data, and provides plots for distribution of the accuracy.


### create_plots.py
Input: dataset.csv
Output: png files in plots folder

The script creates plots for the features in the dataset. 


### create_map.py
Input: 
1. AI-model from resources/keras_model
2. Forecast regions from resources/forecast_area.json 
3. Input data from resources/input_mock_data.csv

Output: Map of dangerlevel for each region. The map is saved in plots folder.

This predicts the dangerlevel of an avalanche for each region based on the input data with the AI model. 


## data
This folder contains the datasets from scripts in src folder.

### dataset.csv
Generated by script src/fetcher.py.

NB: The dataset is up-to-date pr 27/10/2020. 



## resources

### forecast_area.json
JSON file containing information to create a map for visualization.


### input_mock_data.csv
This file contains the input for the AI-modell to predict avalanches for 1st of March 2020. 



## plots
This folder contains the plots generated in src/create_plots.py and map from src/create_map.py
